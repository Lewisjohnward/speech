(this.webpackJsonpspeach=this.webpackJsonpspeach||[]).push([[0],{151:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(38),i=n.n(r),o=(n(151),n(7)),s=n.n(o),u=n(39),j=n(3),d=n(6),l=n(16),b=n.n(l),O=n(4),f=n(1),m=function(e){var t,n=e.audio,c=e.time,r=e.duration,i=Object(a.useState)(null),o=Object(j.a)(i,2),s=o[0],u=o[1];if(Object(a.useEffect)((function(){if(n){var e=new AudioContext;fetch(n).then((function(e){return e.arrayBuffer()})).then((function(t){var n={audio_context:e,array_buffer:t,scale:512};return new Promise((function(e,t){b.a.createFromAudio(n,(function(n,a){n?t(n):e(a)}))}))})).then((function(e){u(e)}))}}),[n]),!s)return null;var l=1200,m=200,h=10,x=10,v=m-h-10,p=l-x-10,g=s.channel(0),y=g.min_array(),k=g.max_array(),w=Object(O.f)().domain([0,s.length]).range([0,p]),F=Object(O.f)().domain([Object(O.c)(y),Object(O.b)(k)]).range([v,0]).nice(),S=Object(O.f)().domain([0,r]).range([0,p]);return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("svg",{height:m,width:l,children:[Object(f.jsx)("rect",{x:0,y:0,height:m,width:l,stroke:"black",fill:"none"}),Object(f.jsxs)("g",{transform:"translate(".concat(x,", ").concat(h,")"),children:[Object(f.jsx)("rect",{x:0,y:0,height:v,width:p,stroke:"black",strokeWidth:.05,fill:"none"}),Object(f.jsx)("path",{stroke:"mediumvioletred",d:Object(O.a)().x((function(e,t){return w(t)})).y0((function(e){return F(e)})).y1((function(e){return F(e)}))(k)}),Object(f.jsx)("path",{fill:"black",stroke:"mediumvioletred",d:Object(O.a)().x((function(e,t){return w(t)})).y0((function(e){return F(e)})).y1((function(e){return F(e)}))(y)}),c&&Object(f.jsx)("g",{transform:"translate(".concat(S(c),", 0)"),children:Object(f.jsx)("line",{stroke:"darkcyan",y1:v})})]}),Object(f.jsx)("text",(t={x:1165,y:197,stroke:"darkmagenta",opacity:1,fontStyle:"italic"},Object(d.a)(t,"opacity",.7),Object(d.a)(t,"children",(r-c).toFixed(2)),t))]})})},h=n(40),x=function(e){var t=e.replay,n=e.setReplay;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(h.a,{onClick:function(){n(!t)},className:"replayIcon icon",color:t?"darkOrchid":"white"})})},v=n(41),p=function(e){var t=e.handleDelete;return Object(f.jsx)(v.a,{onClick:t,className:"bin icon"})},g=n(12),y=function(e){var t=e.playing,n=e.stopVideo,a=e.startVideo;return Object(f.jsx)(f.Fragment,{children:t?Object(f.jsx)(g.c,{className:"microphoneButton icon",onClick:n,color:t?"darkOrchid":"white"}):Object(f.jsx)(g.b,{className:"microphoneButton icon",onClick:a,color:t?"darkOrchid":"white"})})},k=n(25),w=n(42),F=function(){return Object(f.jsxs)("div",{className:"thumbsIconContainer",children:[Object(f.jsx)(g.a,{className:"thumb icon"}),Object(f.jsx)(k.a,{className:"thumb icon"}),Object(f.jsx)(k.b,{className:"thumb icon"}),Object(f.jsx)(w.a,{className:"thumb icon"})]})};function S(){var e,t,n=Object(a.useState)(!1),c=Object(j.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)(!1),d=Object(j.a)(o,2),l=d[0],b=d[1],O=Object(a.useState)(null),h=Object(j.a)(O,2),v=h[0],g=h[1],k=Object(a.useState)(null),w=Object(j.a)(k,2),S=w[0],N=w[1],C=Object(a.useState)(null),_=Object(j.a)(C,2),E=_[0],A=_[1],M=Object(a.useState)(0),R=Object(j.a)(M,2),P=R[0],B=R[1],T=Object(a.useState)(0),U=Object(j.a)(T,2),q=U[0],I=U[1],z=Object(a.useState)(!1),D=Object(j.a)(z,2),L=D[0],V=D[1],W=Object(a.useRef)(),G=Object(a.useRef)();Object(a.useEffect)((function(){if(S){S.start();var e=[];S.ondataavailable=function(t){e.push(t.data)},S.onstop=function(t){var n=new Blob(e,{type:"audio/wav"});e=[];var a=window.URL.createObjectURL(n);A(a)}}}),[S]),Object(a.useEffect)((function(){document.getElementsByClassName("app_audio")[0].src=E}),[E]),Object(a.useEffect)((function(){var e=W.current.duration.toFixed(2);B(e)}),[null===W||void 0===W||null===(e=W.current)||void 0===e?void 0:e.loadedmetadata,null===W||void 0===W||null===(t=W.current)||void 0===t?void 0:t.readyState]);var J=function(){var e=l;b(!e),e?cancelAnimationFrame(G.current):G.current=requestAnimationFrame(H)},H=function e(){K(),G.current=requestAnimationFrame(e)},K=function(){I(W.current.currentTime)},Q=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:t=e.sent,g(t),N(new MediaRecorder(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"app",children:[Object(f.jsxs)("div",{id:"audioControls",children:[Object(f.jsx)(p,{handleDelete:function(){A(null)}}),Object(f.jsx)(y,{playing:r,stopVideo:function(){i(!1),v.getTracks()[0].stop(),setTimeout((function(){S.stop()}),500)},startVideo:Q}),Object(f.jsx)("audio",{onPlay:J,onPause:J,onEnded:function(){b(!1),I(0),W.current.currentTime=0},preload:"auto",ref:W,controls:!0,className:"app_audio",loop:!!L}),Object(f.jsx)(x,{replay:L,setReplay:V})]}),Object(f.jsx)(F,{}),E&&Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(m,{audio:E,time:q,duration:P})})]})}navigator.userMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var N=n(43),C=function(){return Object(f.jsx)(N.a,{id:"options",className:"icon"})},_=n.p+"static/media/01-\xc8 un grande sollievo scriverne.e253fcbf.mp3",E=n.p+"static/media/02-Non ho pi\xf9 dormito bene da quando ho ritrovato mio zio Otto morto.37ee7dfc.mp3",A=n.p+"static/media/03-e pi\xf9 di una volta mi sono veramente doman-dato se fossi diventato pazzo o se lo diventer\xf2.5db87318.mp3",M=n.p+"static/media/04- In un certo senso sarebbe stato tutto pi\xf9 misericordioso se non avessi avuto l_oggetto qui, nel mio studio, dove posso guardarlo e prenderlo in mano e soppesarlo se voglio.6b53639b.mp3",R=function(e){var t,n=e.audio,c=e.time,r=e.duration,i=Object(a.useState)(null),o=Object(j.a)(i,2),s=o[0],u=o[1];if(Object(a.useEffect)((function(){if(n){var e=new AudioContext;fetch(n).then((function(e){return e.arrayBuffer()})).then((function(t){var n={audio_context:e,array_buffer:t,scale:512};return new Promise((function(e,t){b.a.createFromAudio(n,(function(n,a){n?t(n):e(a)}))}))})).then((function(e){u(e)}))}}),[n]),!s)return null;var l=1200,m=200,h=10,x=10,v=m-h-10,p=l-x-10,g=v/2,y=s.channel(0),k=y.min_array(),w=y.max_array(),F=Object(O.e)().domain(Object(O.d)(s.length)).range([0,p]),S=Object(O.f)().domain([0,Object(O.b)(w,(function(e){return e}))]).range([g,0]).nice(),N=Object(O.f)().domain([0,Object(O.c)(k,(function(e){return e}))]).range([v,g]).nice(),C=Object(O.f)().domain([0,r]).range([0,p]);return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("svg",{height:m,width:l,children:[Object(f.jsx)("rect",{height:m,width:l,stroke:"black",fill:"none"}),Object(f.jsxs)("g",{transform:"translate(".concat(x,", ").concat(h,")"),children:[Object(f.jsx)("rect",{height:v,width:p,stroke:"black",strokeWidth:.05,fill:"none"}),w.map((function(e,t){return Object(f.jsx)("rect",{fill:"greenyellow",stroke:"black",strokeWidth:.1,x:F(t),y:S(e),width:F.bandwidth(),height:g-S(e)})})),k.map((function(e,t){return Object(f.jsx)("rect",{fill:"greenyellow",stroke:"black",strokeWidth:.1,x:F(t),y:g,width:F.bandwidth(),height:v-N(e)})})),c&&Object(f.jsx)("g",{transform:"translate(".concat(C(c),", 0)"),children:Object(f.jsx)("line",{stroke:"darkcyan",y1:v})})]}),Object(f.jsx)("text",(t={x:1165,y:197,stroke:"darkmagenta",opacity:1,fontStyle:"italic"},Object(d.a)(t,"opacity",.7),Object(d.a)(t,"children",(r-c).toFixed(2)),t))]})})},P=n(44),B=function(){return Object(f.jsx)("div",{children:Object(f.jsx)(P.a,{className:"replayIcon icon",color:"white"})})},T=function(){var e,t,n=Object(a.useState)(0),c=Object(j.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)(!1),s=Object(j.a)(o,2),u=s[0],d=s[1],l=Object(a.useState)(0),b=Object(j.a)(l,2),O=b[0],h=b[1],v=Object(a.useState)(!1),p=Object(j.a)(v,2),g=p[0],y=p[1],k=Object(a.useState)(!1),w=Object(j.a)(k,2),F=w[0],S=w[1],N=Object(a.useRef)(),C=Object(a.useRef)();Object(a.useEffect)((function(){var e=N.current.duration.toFixed(2);i(e)}),[null===N||void 0===N||null===(e=N.current)||void 0===e?void 0:e.loadedmetadata,null===N||void 0===N||null===(t=N.current)||void 0===t?void 0:t.readyState]);var P=function(){var e=u;d(!e),e?cancelAnimationFrame(C.current):C.current=requestAnimationFrame(T)},T=function e(){U(),C.current=requestAnimationFrame(e)},U=function(){h(N.current.currentTime)};Object(a.useEffect)((function(){S(Math.floor(Math.random()*q.length))}),[]);var q=[_,E,A,M],I=q[F];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{id:"audioPlayer",children:[Object(f.jsx)(B,{}),Object(f.jsx)("audio",{onPlay:P,onPause:P,onEnded:function(){d(!1),h(0),N.current.currentTime=0},ref:N,controls:!0,className:"app_audio",src:I,loop:!!g,preload:"auto"}),Object(f.jsx)(x,{replay:g,setReplay:y})]}),F,Object(f.jsx)(m,{audio:I,time:O,duration:r}),Object(f.jsx)(R,{audio:I,time:O,duration:r})]})};var U=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:"app",children:[Object(f.jsx)(C,{}),Object(f.jsx)(S,{}),Object(f.jsx)(T,{})]})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,164)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(U,{})}),document.getElementById("root")),q()}},[[163,1,2]]]);
//# sourceMappingURL=main.5d62e908.chunk.js.map