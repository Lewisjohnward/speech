(this.webpackJsonpspeach=this.webpackJsonpspeach||[]).push([[0],{149:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(38),i=n.n(r),u=(n(149),n(7)),o=n.n(u),s=n(39),l=n(3),j=n(6),d=n(15),b=n.n(d),f=n(4),O=n(1),v=function(e){var t,n=e.audio,a=e.time,r=e.duration,i=Object(c.useState)(null),u=Object(l.a)(i,2),o=u[0],s=u[1];if(Object(c.useEffect)((function(){if(n){var e=new AudioContext;fetch(n).then((function(e){return e.arrayBuffer()})).then((function(t){var n={audio_context:e,array_buffer:t,scale:512};return new Promise((function(e,t){b.a.createFromAudio(n,(function(n,c){n?t(n):e(c)}))}))})).then((function(e){s(e)}))}}),[n]),!o)return null;var d=1200,v=200,m=10,h=10,x=v-m-10,p=d-h-10,g=o.channel(0),y=g.min_array(),k=g.max_array(),w=Object(f.f)().domain([0,o.length]).range([0,p]),N=Object(f.f)().domain([Object(f.c)(y),Object(f.b)(k)]).range([x,0]).nice(),S=Object(f.f)().domain([0,r]).range([0,p]);return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("svg",{height:v,width:d,children:[Object(O.jsx)("rect",{x:0,y:0,height:v,width:d,stroke:"black",fill:"none"}),Object(O.jsxs)("g",{transform:"translate(".concat(h,", ").concat(m,")"),children:[Object(O.jsx)("rect",{x:0,y:0,height:x,width:p,stroke:"black",strokeWidth:.05,fill:"none"}),Object(O.jsx)("path",{stroke:"mediumvioletred",d:Object(f.a)().x((function(e,t){return w(t)})).y0((function(e){return N(e)})).y1((function(e){return N(e)}))(k)}),Object(O.jsx)("path",{fill:"black",stroke:"mediumvioletred",d:Object(f.a)().x((function(e,t){return w(t)})).y0((function(e){return N(e)})).y1((function(e){return N(e)}))(y)}),a&&Object(O.jsx)("g",{transform:"translate(".concat(S(a),", 0)"),children:Object(O.jsx)("line",{stroke:"darkcyan",y1:x})})]}),Object(O.jsx)("text",(t={x:1165,y:197,stroke:"darkmagenta",opacity:1,fontStyle:"italic"},Object(j.a)(t,"opacity",.7),Object(j.a)(t,"children",(r-a).toFixed(2)),t))]})})},m=n(24),h=n(40);function x(){var e,t,n=Object(c.useState)(!1),a=Object(l.a)(n,2),r=a[0],i=a[1],u=Object(c.useState)(null),j=Object(l.a)(u,2),d=j[0],b=j[1],f=Object(c.useState)(null),x=Object(l.a)(f,2),p=x[0],g=x[1],y=Object(c.useState)(null),k=Object(l.a)(y,2),w=k[0],N=k[1],S=Object(c.useState)(0),F=Object(l.a)(S,2),M=F[0],C=F[1],P=Object(c.useState)(0),_=Object(l.a)(P,2),E=_[0],T=(_[1],Object(c.useRef)());Object(c.useEffect)((function(){if(p){p.start();var e=[];p.ondataavailable=function(t){e.push(t.data)},p.onstop=function(t){var n=new Blob(e,{type:"audio/wav"});e=[];var c=window.URL.createObjectURL(n);N(c)}}}),[p]),Object(c.useEffect)((function(){document.getElementsByClassName("app_audio")[0].src=w}),[w]),Object(c.useEffect)((function(){var e=Math.floor(T.current.duration);C(e)}),[null===T||void 0===T||null===(e=T.current)||void 0===e?void 0:e.loadedmetadata,null===T||void 0===T||null===(t=T.current)||void 0===t?void 0:t.readyState]);var B=function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:t=e.sent,b(t),g(new MediaRecorder(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"app",children:[Object(O.jsx)("div",{className:"app__container",children:Object(O.jsx)("audio",{onPlay:function(){return i(!0)},ref:T,controls:!0,className:"app_audio"})}),Object(O.jsx)("div",{className:"app__input",children:r?Object(O.jsx)("button",{onClick:function(){i(!1),d.getTracks()[0].stop(),setTimeout((function(){p.stop()}),500)},children:Object(O.jsx)(m.b,{})}):Object(O.jsx)("button",{onClick:B,children:Object(O.jsx)(m.a,{})})}),w&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{audio:w,time:E,duration:M}),Object(O.jsx)("a",{href:w,download:"user-audio.mp3",children:Object(O.jsx)(h.a,{})})]})]})}navigator.userMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var p=n.p+"static/media/veroeproprio.f8a40d8b.wav",g=n(25),y=n(42),k=n(41),w=(n(161),function(){var e,t,n=Object(c.useState)(!1),a=Object(l.a)(n,2),r=a[0],i=a[1],u=Object(c.useState)(0),o=Object(l.a)(u,2),s=o[0],j=o[1],d=Object(c.useState)(0),b=Object(l.a)(d,2),f=b[0],v=b[1],m=Object(c.useRef)(),h=Object(c.useRef)(),x=Object(c.useRef)();Object(c.useEffect)((function(){var e=Math.floor(m.current.duration);j(e),h.current.max=e}),[null===m||void 0===m||null===(e=m.current)||void 0===e?void 0:e.loadedmetadata,null===m||void 0===m||null===(t=m.current)||void 0===t?void 0:t.readyState]);var w=function e(){h.current.value=m.current.currentTime,S(),x.current=requestAnimationFrame(e)},N=function(){m.current.currentTime=h.current.value,S()},S=function(){h.current.style.setProperty("--seek-before-width","".concat(h.current.value/s*100,"%")),v(h.current.value)},F=function(e){var t=Math.floor(e/60),n=t<10?"0".concat(t):"".concat(t),c=Math.floor(e%60),a=c<10?"0".concat(c):"".concat(c);return"".concat(n,":").concat(a)};return Object(O.jsxs)("div",{className:"audioPlayer",children:[Object(O.jsx)("audio",{onEnded:function(){i(!1),v(0),m.current.currentTime=0},ref:m,src:p}),Object(O.jsxs)("div",{className:"audioPlayerSlider",children:[Object(O.jsx)("div",{className:"currentTime",children:F(f)}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{onChange:N,ref:h,className:"progressBar",type:"range",defaultValue:"0"})}),Object(O.jsx)("div",{className:"duration",children:s&&!isNaN(s)&&F(s)})]}),Object(O.jsxs)("div",{className:"audioPlayerButtons",children:[Object(O.jsx)("button",{onClick:function(){h.current.value=Number(h.current.value-1),N()},className:"forwardBackward",children:Object(O.jsx)(g.a,{})}),Object(O.jsx)("button",{className:"playPause",onClick:function(){var e=r;i(!e),e?(m.current.pause(),cancelAnimationFrame(x.current)):(m.current.play(),x.current=requestAnimationFrame(w))},children:r?Object(O.jsx)(k.a,{}):Object(O.jsx)(y.a,{className:"play"})}),Object(O.jsx)("button",{onClick:function(){h.current.value=Number(h.current.value+1),N()},className:"forwardBackward",children:Object(O.jsx)(g.b,{})})]})]})}),N=function(){var e,t,n=Object(c.useState)(0),a=Object(l.a)(n,2),r=(a[0],a[1]),i=Object(c.useState)(!1),u=Object(l.a)(i,2),o=u[0],s=u[1],j=Object(c.useState)(0),d=Object(l.a)(j,2),b=(d[0],d[1]),f=Object(c.useRef)(),v=Object(c.useRef)();Object(c.useEffect)((function(){var e=f.current.duration.toFixed(2);console.log(e),r(e)}),[null===f||void 0===f||null===(e=f.current)||void 0===e?void 0:e.loadedmetadata,null===f||void 0===f||null===(t=f.current)||void 0===t?void 0:t.readyState]);var m=function(){var e=o;s(!e),e?cancelAnimationFrame(v.current):v.current=requestAnimationFrame(h)},h=function e(){x(),v.current=requestAnimationFrame(e)},x=function(){b(f.current.currentTime)};return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("audio",{onPlay:m,onPause:m,onEnded:function(){s(!1),b(0),f.current.currentTime=0},ref:f,controls:!0,className:"app_audio",src:p,preload:"auto"})})};var S=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"app",children:[Object(O.jsx)(w,{}),Object(O.jsx)(x,{}),Object(O.jsx)(N,{})]})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,163)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root")),F()}},[[162,1,2]]]);
//# sourceMappingURL=main.45dd2c08.chunk.js.map