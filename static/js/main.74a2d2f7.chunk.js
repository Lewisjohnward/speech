(this.webpackJsonpspeach=this.webpackJsonpspeach||[]).push([[0],{149:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(38),i=n.n(r),o=(n(149),n(7)),u=n.n(o),s=n(39),j=n(3),l=n(6),d=n(15),b=n.n(d),f=n(4),O=n(1),h=function(e){var t,n=e.audio,a=e.time,r=e.duration,i=Object(c.useState)(null),o=Object(j.a)(i,2),u=o[0],s=o[1];if(Object(c.useEffect)((function(){if(n){var e=new AudioContext;fetch(n).then((function(e){return e.arrayBuffer()})).then((function(t){var n={audio_context:e,array_buffer:t,scale:512};return new Promise((function(e,t){b.a.createFromAudio(n,(function(n,c){n?t(n):e(c)}))}))})).then((function(e){s(e)}))}}),[n]),!u)return null;var d=1200,h=200,m=10,x=10,v=h-m-10,g=d-x-10,p=u.channel(0),y=p.min_array(),k=p.max_array(),w=Object(f.f)().domain([0,u.length]).range([0,g]),S=Object(f.f)().domain([Object(f.c)(y),Object(f.b)(k)]).range([v,0]).nice(),F=Object(f.f)().domain([0,r]).range([0,g]);return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("svg",{height:h,width:d,children:[Object(O.jsx)("rect",{x:0,y:0,height:h,width:d,stroke:"black",fill:"none"}),Object(O.jsxs)("g",{transform:"translate(".concat(x,", ").concat(m,")"),children:[Object(O.jsx)("rect",{x:0,y:0,height:v,width:g,stroke:"black",strokeWidth:.05,fill:"none"}),Object(O.jsx)("path",{stroke:"mediumvioletred",d:Object(f.a)().x((function(e,t){return w(t)})).y0((function(e){return S(e)})).y1((function(e){return S(e)}))(k)}),Object(O.jsx)("path",{fill:"black",stroke:"mediumvioletred",d:Object(f.a)().x((function(e,t){return w(t)})).y0((function(e){return S(e)})).y1((function(e){return S(e)}))(y)}),a&&Object(O.jsx)("g",{transform:"translate(".concat(F(a),", 0)"),children:Object(O.jsx)("line",{stroke:"darkcyan",y1:v})})]}),Object(O.jsx)("text",(t={x:1165,y:197,stroke:"darkmagenta",opacity:1,fontStyle:"italic"},Object(l.a)(t,"opacity",.7),Object(l.a)(t,"children",(r-a).toFixed(2)),t))]})})},m=n(24),x=n(40);function v(){var e,t,n=Object(c.useState)(!1),a=Object(j.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(null),l=Object(j.a)(o,2),d=l[0],b=l[1],f=Object(c.useState)(null),v=Object(j.a)(f,2),g=v[0],p=v[1],y=Object(c.useState)(null),k=Object(j.a)(y,2),w=k[0],S=k[1],F=Object(c.useState)(0),N=Object(j.a)(F,2),_=N[0],C=N[1],M=Object(c.useState)(0),P=Object(j.a)(M,2),E=P[0],A=(P[1],Object(c.useRef)());Object(c.useEffect)((function(){if(g){g.start();var e=[];g.ondataavailable=function(t){e.push(t.data)},g.onstop=function(t){var n=new Blob(e,{type:"audio/wav"});e=[];var c=window.URL.createObjectURL(n);S(c)}}}),[g]),Object(c.useEffect)((function(){document.getElementsByClassName("app_audio")[0].src=w}),[w]),Object(c.useEffect)((function(){var e=Math.floor(A.current.duration);C(e)}),[null===A||void 0===A||null===(e=A.current)||void 0===e?void 0:e.loadedmetadata,null===A||void 0===A||null===(t=A.current)||void 0===t?void 0:t.readyState]);var B=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:t=e.sent,b(t),p(new MediaRecorder(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"app",children:[Object(O.jsx)("div",{className:"app__container",children:Object(O.jsx)("audio",{onPlay:function(){return i(!0)},ref:A,controls:!0,className:"app_audio"})}),Object(O.jsx)("div",{className:"app__input",children:r?Object(O.jsx)("button",{onClick:function(){i(!1),d.getTracks()[0].stop(),setTimeout((function(){g.stop()}),500)},children:Object(O.jsx)(m.b,{})}):Object(O.jsx)("button",{onClick:B,children:Object(O.jsx)(m.a,{})})}),w&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(h,{audio:w,time:E,duration:_}),Object(O.jsx)("a",{href:w,download:"user-audio.mp3",children:Object(O.jsx)(x.a,{})})]})]})}navigator.userMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var g=n.p+"static/media/veroeproprio.f8a40d8b.wav",p=n(25),y=n(42),k=n(41),w=(n(161),function(){var e,t,n=Object(c.useState)(!1),a=Object(j.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(0),u=Object(j.a)(o,2),s=u[0],l=u[1],d=Object(c.useState)(0),b=Object(j.a)(d,2),f=b[0],h=b[1],m=Object(c.useRef)(),x=Object(c.useRef)(),v=Object(c.useRef)();Object(c.useEffect)((function(){var e=Math.floor(m.current.duration);l(e),x.current.max=e}),[null===m||void 0===m||null===(e=m.current)||void 0===e?void 0:e.loadedmetadata,null===m||void 0===m||null===(t=m.current)||void 0===t?void 0:t.readyState]);var w=function e(){x.current.value=m.current.currentTime,F(),v.current=requestAnimationFrame(e)},S=function(){m.current.currentTime=x.current.value,F()},F=function(){x.current.style.setProperty("--seek-before-width","".concat(x.current.value/s*100,"%")),h(x.current.value)},N=function(e){var t=Math.floor(e/60),n=t<10?"0".concat(t):"".concat(t),c=Math.floor(e%60),a=c<10?"0".concat(c):"".concat(c);return"".concat(n,":").concat(a)};return Object(O.jsxs)("div",{className:"audioPlayer",children:[Object(O.jsx)("audio",{onEnded:function(){i(!1),h(0),m.current.currentTime=0},ref:m,src:g}),Object(O.jsxs)("div",{className:"audioPlayerSlider",children:[Object(O.jsx)("div",{className:"currentTime",children:N(f)}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{onChange:S,ref:x,className:"progressBar",type:"range",defaultValue:"0"})}),Object(O.jsx)("div",{className:"duration",children:s&&!isNaN(s)&&N(s)})]}),Object(O.jsxs)("div",{className:"audioPlayerButtons",children:[Object(O.jsx)("button",{onClick:function(){x.current.value=Number(x.current.value-1),S()},className:"forwardBackward",children:Object(O.jsx)(p.a,{})}),Object(O.jsx)("button",{className:"playPause",onClick:function(){var e=r;i(!e),e?(m.current.pause(),cancelAnimationFrame(v.current)):(m.current.play(),v.current=requestAnimationFrame(w))},children:r?Object(O.jsx)(k.a,{}):Object(O.jsx)(y.a,{className:"play"})}),Object(O.jsx)("button",{onClick:function(){x.current.value=Number(x.current.value+1),S()},className:"forwardBackward",children:Object(O.jsx)(p.b,{})})]})]})}),S=function(e){var t,n=e.audio,a=e.time,r=e.duration,i=Object(c.useState)(null),o=Object(j.a)(i,2),u=o[0],s=o[1];if(Object(c.useEffect)((function(){if(n){var e=new AudioContext;fetch(n).then((function(e){return e.arrayBuffer()})).then((function(t){var n={audio_context:e,array_buffer:t,scale:512};return new Promise((function(e,t){b.a.createFromAudio(n,(function(n,c){n?t(n):e(c)}))}))})).then((function(e){s(e)}))}}),[n]),!u)return null;var d=1200,h=200,m=10,x=10,v=h-m-10,g=d-x-10,p=v/2,y=u.channel(0),k=y.min_array(),w=y.max_array(),S=Object(f.e)().domain(Object(f.d)(u.length)).range([0,g]),F=Object(f.f)().domain([0,Object(f.b)(w,(function(e){return e}))]).range([p,0]).nice(),N=Object(f.f)().domain([0,Object(f.c)(k,(function(e){return e}))]).range([v,p]).nice(),_=Object(f.f)().domain([0,r]).range([0,g]);return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("svg",{height:h,width:d,children:[Object(O.jsx)("rect",{height:h,width:d,stroke:"black",fill:"none"}),Object(O.jsxs)("g",{transform:"translate(".concat(x,", ").concat(m,")"),children:[Object(O.jsx)("rect",{height:v,width:g,stroke:"black",strokeWidth:.05,fill:"none"}),w.map((function(e,t){return Object(O.jsx)("rect",{fill:"greenyellow",stroke:"black",strokeWidth:.1,x:S(t),y:F(e),width:S.bandwidth(),height:p-F(e)})})),k.map((function(e,t){return Object(O.jsx)("rect",{fill:"greenyellow",stroke:"black",strokeWidth:.1,x:S(t),y:p,width:S.bandwidth(),height:v-N(e)})})),a&&Object(O.jsx)("g",{transform:"translate(".concat(_(a),", 0)"),children:Object(O.jsx)("line",{stroke:"darkcyan",y1:v})})]}),Object(O.jsx)("text",(t={x:1165,y:197,stroke:"darkmagenta",opacity:1,fontStyle:"italic"},Object(l.a)(t,"opacity",.7),Object(l.a)(t,"children",(r-a).toFixed(2)),t))]})})},F=function(e){var t,n=e.time,c=e.duration,a=1200,r=200,i=10,o=10,u=r-i-10,s=a-o-10,j=Object(f.f)().domain([0,c]).range([0,s]);return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("svg",{height:r,width:a,children:[Object(O.jsx)("rect",{height:r,width:a,stroke:"black",fill:"none"}),Object(O.jsx)("g",{transform:"translate(".concat(o,", ").concat(i,")"),children:n&&Object(O.jsx)("g",{transform:"translate(".concat(j(n),", 0)"),children:Object(O.jsx)("line",{stroke:"darkcyan",y1:u})})}),Object(O.jsx)("text",(t={x:1165,y:197,stroke:"darkmagenta",opacity:1,fontStyle:"italic"},Object(l.a)(t,"opacity",.7),Object(l.a)(t,"children",(c-n).toFixed(2)),t))]})})},N=function(){var e,t,n=Object(c.useState)(0),a=Object(j.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(!1),u=Object(j.a)(o,2),s=u[0],l=u[1],d=Object(c.useState)(0),b=Object(j.a)(d,2),f=b[0],m=b[1],x=Object(c.useRef)(),v=Object(c.useRef)();Object(c.useEffect)((function(){var e=x.current.duration.toFixed(2);console.log(e),i(e)}),[null===x||void 0===x||null===(e=x.current)||void 0===e?void 0:e.loadedmetadata,null===x||void 0===x||null===(t=x.current)||void 0===t?void 0:t.readyState]);var p=function(){var e=s;l(!e),e?cancelAnimationFrame(v.current):v.current=requestAnimationFrame(y)},y=function e(){k(),v.current=requestAnimationFrame(e)},k=function(){m(x.current.currentTime)};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("audio",{onPlay:p,onPause:p,onEnded:function(){l(!1),m(0),x.current.currentTime=0},ref:x,controls:!0,className:"app_audio",src:g,preload:"auto"}),Object(O.jsx)(h,{audio:g,time:f,duration:r}),Object(O.jsx)(S,{audio:g,time:f,duration:r}),Object(O.jsx)(F,{time:f,duration:r})]})};var _=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"app",children:[Object(O.jsx)(w,{}),Object(O.jsx)(v,{}),Object(O.jsx)(N,{})]})})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,163)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(_,{})}),document.getElementById("root")),C()}},[[162,1,2]]]);
//# sourceMappingURL=main.74a2d2f7.chunk.js.map